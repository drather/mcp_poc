# MCP PoC Todo-List (S1)

> RAG 시스템과 연동하여 외부 시스템(WEB/WAS/DB)과 실시간 상호작용을 검증하기 위한 PoC 계획

## Phase 1: 가상 시스템 환경 구축

- [x] **DB 정의 및 생성**
    - [x] 간단한 `tasks` 테이블 정의 (e.g., id, content, status, created_at)
    - [x] `mcp_poc/db/db.json` 또는 SQLite를 사용하여 초기 데이터 구성

- [x] **WAS (API 서버) 개발**
    - [x] Python FastAPI/Flask 등을 사용하여 API 서버 (`mcp_poc/was/app.py`) 구현
    - [x] DB의 `tasks` 테이블과 연동하는 CRUD API 엔드포인트 구현
        - `GET /api/tasks`: 모든 할 일 목록 조회
        - `POST /api/tasks`: 새 할 일 추가
        - `PUT /api/tasks/{task_id}`: 할 일 상태 업데이트
    - [x] API 명세 간단히 문서화

- [x] **WEB 서버 구성**
    - [x] Nginx (`mcp_poc/web/nginx.conf`) 설정
    - [x] WAS API를 호출하는 간단한 정적 HTML/JS 페이지 (선택 사항, API 테스트만으로도 충분)

- [x] **컨테이너 환경 구성**
    - [x] `docker-compose.yml` 파일에 WEB, WAS, DB 서비스 정의
    - [x] `docker-compose up` 명령어로 전체 가상 시스템 환경 실행 확인

## Phase 2: MCP(Model-Controller-Pipeline) 핵심 로직 개발

- [x] **LLM 라우터(Router) 설계**
    - [x] 사용자 질문의 의도를 파악하여 어떤 도구를 사용할지 결정하는 기능
        - 예: "문서 찾아줘" -> RAG, "할 일 등록해줘" -> WAS API
    - [x] PoC 단계에서는 키워드 기반의 간단한 라우터로 구현

- [x] **도구(Tools) 정의**
    - [x] **RAG 연동 도구**: 기존 `rag_poc`를 호출할 수 있는 함수/클래스 정의
    - [x] **WAS API 호출 도구**: Phase 1에서 개발한 WAS API를 호출하는 함수/클래스 정의

- [x] **MCP 파이프라인 구현**
    - [x] 사용자 질문 -> 라우터 -> 도구 선택 -> 도구 실행 -> 결과 반환의 흐름을 제어하는 메인 파이프라인 코드 작성
    - [x] 도구 실행 결과를 바탕으로 최종 답변을 생성하도록 LLM과 연동

## Phase 3: 통합 및 시나리오 검증

- [x] **RAG 시스템 API화**
    - [x] 기존 `rag_poc`를 외부(MCP)에서 호출할 수 있도록 간단한 API 형태로 래핑

- [ ] **통합 테스트 시나리오 작성**
    - [ ] **시나리오 1 (RAG):** "인프라 변경 이력에 대해 알려줘" -> RAG 도구 호출 확인
    - [ ] **시나리오 2 (MCP):** "새로운 할 일 'API 명세 작성'을 추가해줘" -> WAS API 도구 호출 확인
    - [ ] **시나리오 3 (복합):** "시스템 구성 문서를 참고해서 '웹서버 설정 검토' 할 일을 추가해줘" -> RAG로 문서 검색 후, 그 내용을 기반으로 WAS API 호출 확인 (심화)

- [ ] **시나리오 기반 테스트 및 결과 검증**
    - [ ] 각 시나리오별로 MCP가 의도대로 동작하는지 확인하고 결과 기록

## Phase 4: 문서화 및 정리

- [ ] PoC 과정, 구현 내용, 테스트 결과 등을 간단히 문서로 정리
- [ ] 향후 발전 방향 및 개선점 도출